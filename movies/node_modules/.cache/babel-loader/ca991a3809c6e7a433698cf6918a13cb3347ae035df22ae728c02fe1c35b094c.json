{"ast":null,"code":"var _jsxFileName = \"/Users/jorjaholland/Desktop/web app assignment /react-movie-labs/MoviesCA/movies/src/pages/homePage.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { getMovies, getGenres } from \"../api/tmdb-api\";\nimport PageTemplate from '../components/templateMovieListPage';\nimport { useQuery } from 'react-query';\nimport Spinner from '../components/spinner';\nimport AddToFavoritesIcon from '../components/cardIcons/addToFavorites';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst HomePage = () => {\n  const [genres, setGenres] = useState([]);\n  const {\n    data,\n    error,\n    isLoading,\n    isError\n  } = useQuery('discover', getMovies);\n  useEffect(() => {\n    getGenres().then(response => {\n      if (Array.isArray(response)) {\n        setGenres(response);\n      } else {\n        console.error(\"Expected genres to be an array, but got:\", response);\n      }\n    }).catch(error => {\n      console.error(\"Error fetching genres:\", error);\n    });\n  }, []);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 12\n    }, this);\n  }\n  if (isError) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: error.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 12\n    }, this);\n  }\n  const movies = (data === null || data === void 0 ? void 0 : data.results) || [];\n  const getMovieGenres = movie => {\n    if (!genres || genres.length === 0) {\n      return [];\n    }\n    return movie.genre_ids.map(genreId => genres.find(genre => genre.id === genreId)).filter(genre => genre);\n  };\n  return /*#__PURE__*/_jsxDEV(PageTemplate, {\n    title: \"Discover Movies\",\n    movies: movies,\n    action: movie => {\n      return /*#__PURE__*/_jsxDEV(AddToFavoritesIcon, {\n        movie: movie\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 16\n      }, this);\n    },\n    getGenresForMovie: getMovieGenres\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\nexport default HomePage;","map":{"version":3,"names":["React","useState","useEffect","getMovies","getGenres","PageTemplate","useQuery","Spinner","AddToFavoritesIcon","jsxDEV","_jsxDEV","HomePage","genres","setGenres","data","error","isLoading","isError","then","response","Array","isArray","console","catch","fileName","_jsxFileName","lineNumber","columnNumber","children","message","movies","results","getMovieGenres","movie","length","genre_ids","map","genreId","find","genre","id","filter","title","action","getGenresForMovie"],"sources":["/Users/jorjaholland/Desktop/web app assignment /react-movie-labs/MoviesCA/movies/src/pages/homePage.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { getMovies, getGenres } from \"../api/tmdb-api\";\nimport PageTemplate from '../components/templateMovieListPage';\nimport { useQuery } from 'react-query';\nimport Spinner from '../components/spinner';\nimport AddToFavoritesIcon from '../components/cardIcons/addToFavorites';\n\nconst HomePage = () => {\n  const [genres, setGenres] = useState([]);\n  const { data, error, isLoading, isError } = useQuery('discover', getMovies);\n\n  useEffect(() => {\n    getGenres().then(response => {\n      if (Array.isArray(response)) {\n        setGenres(response);\n      } else {\n        console.error(\"Expected genres to be an array, but got:\", response);\n      }\n    }).catch(error => {\n      console.error(\"Error fetching genres:\", error);\n    });\n  }, []);\n\n  if (isLoading) {\n    return <Spinner />;\n  }\n\n  if (isError) {\n    return <h1>{error.message}</h1>;\n  }\n\n  const movies = data?.results || [];\n\n  const getMovieGenres = (movie) => {\n    if (!genres || genres.length === 0) {\n      return [];\n    }\n\n    return movie.genre_ids\n      .map(genreId => genres.find(genre => genre.id === genreId))\n      .filter(genre => genre);\n  };\n\n  return (\n    <PageTemplate\n      title=\"Discover Movies\"\n      movies={movies}\n      action={(movie) => {\n        return <AddToFavoritesIcon movie={movie} />;\n      }}\n      getGenresForMovie={getMovieGenres}\n    />\n  );\n};\n\nexport default HomePage;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,EAAEC,SAAS,QAAQ,iBAAiB;AACtD,OAAOC,YAAY,MAAM,qCAAqC;AAC9D,SAASC,QAAQ,QAAQ,aAAa;AACtC,OAAOC,OAAO,MAAM,uBAAuB;AAC3C,OAAOC,kBAAkB,MAAM,wCAAwC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExE,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EACrB,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM;IAAEa,IAAI;IAAEC,KAAK;IAAEC,SAAS;IAAEC;EAAQ,CAAC,GAAGX,QAAQ,CAAC,UAAU,EAAEH,SAAS,CAAC;EAE3ED,SAAS,CAAC,MAAM;IACdE,SAAS,CAAC,CAAC,CAACc,IAAI,CAACC,QAAQ,IAAI;MAC3B,IAAIC,KAAK,CAACC,OAAO,CAACF,QAAQ,CAAC,EAAE;QAC3BN,SAAS,CAACM,QAAQ,CAAC;MACrB,CAAC,MAAM;QACLG,OAAO,CAACP,KAAK,CAAC,0CAA0C,EAAEI,QAAQ,CAAC;MACrE;IACF,CAAC,CAAC,CAACI,KAAK,CAACR,KAAK,IAAI;MAChBO,OAAO,CAACP,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;IAChD,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,IAAIC,SAAS,EAAE;IACb,oBAAON,OAAA,CAACH,OAAO;MAAAiB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpB;EAEA,IAAIV,OAAO,EAAE;IACX,oBAAOP,OAAA;MAAAkB,QAAA,EAAKb,KAAK,CAACc;IAAO;MAAAL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EACjC;EAEA,MAAMG,MAAM,GAAG,CAAAhB,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEiB,OAAO,KAAI,EAAE;EAElC,MAAMC,cAAc,GAAIC,KAAK,IAAK;IAChC,IAAI,CAACrB,MAAM,IAAIA,MAAM,CAACsB,MAAM,KAAK,CAAC,EAAE;MAClC,OAAO,EAAE;IACX;IAEA,OAAOD,KAAK,CAACE,SAAS,CACnBC,GAAG,CAACC,OAAO,IAAIzB,MAAM,CAAC0B,IAAI,CAACC,KAAK,IAAIA,KAAK,CAACC,EAAE,KAAKH,OAAO,CAAC,CAAC,CAC1DI,MAAM,CAACF,KAAK,IAAIA,KAAK,CAAC;EAC3B,CAAC;EAED,oBACE7B,OAAA,CAACL,YAAY;IACXqC,KAAK,EAAC,iBAAiB;IACvBZ,MAAM,EAAEA,MAAO;IACfa,MAAM,EAAGV,KAAK,IAAK;MACjB,oBAAOvB,OAAA,CAACF,kBAAkB;QAACyB,KAAK,EAAEA;MAAM;QAAAT,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAC7C,CAAE;IACFiB,iBAAiB,EAAEZ;EAAe;IAAAR,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnC,CAAC;AAEN,CAAC;AAED,eAAehB,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}